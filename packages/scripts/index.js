var OCS;(()=>{var e={496:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(456),t)},62:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completionHandler=void 0,t.completionHandler=function(e,t){}},274:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getOptionSimilarly=void 0;var i=r(n(386));t.getOptionSimilarly=function(e,t){return t.map((function(t){return t.textContent?i.default.findBestMatch(t.textContent,e).bestMatch.rating:0}))}},799:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.judgmentHandler=t.startWithRight=t.wrong=t.right=void 0;var r=n(386);t.right="是|对|正确|√|对的|是的|正确的|true|yes|YES|Yes",t.wrong="否|错|错误|x|错的|不正确的|不正确|不是|不是的|false|no|NO|No",t.startWithRight=!0,t.judgmentHandler=function(e,n){var i=r.findBestMatch(e[0],t.right.split("|").concat(t.wrong.split("|"))).bestMatch.target,o=1;t.startWithRight?RegExp(t.right).test(i)&&(o=0):RegExp(t.wrong).test(i)&&(o=0),n[o].click()}},682:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multipleChoiceHandler=void 0;var r=n(274);t.multipleChoiceHandler=function(e,t){for(var n=(0,r.getOptionSimilarly)(e,t),i=0;i<n.length;i++)n[i]>.6&&t[i].click()}},444:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.singleChoiceHandler=void 0;var r=n(274);t.singleChoiceHandler=function(e,t){var n=(0,r.getOptionSimilarly)(e,t),i=n.sort()[n.length-1];t[n.findIndex((function(e){return e===i}))].click()}},456:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QA=t.fromElementLike=t.fromElementArrayLike=t.questionTypeWords=t.getQuestionType=t.getOptions=void 0;var r=n(62),i=n(799),o=n(682),l=n(444),u=n(65),s=n(732);Object.defineProperty(t,"getOptions",{enumerable:!0,get:function(){return s.getOptions}});var a=n(65);function c(e,t){if(void 0===t&&(t=document.body),"string"==typeof e){var n=t.querySelectorAll(e);return null===n?void 0:Array.from(n)}return"function"==typeof e?Reflect.apply(e,document,[t]):e}function d(e,t){if(void 0===t&&(t=document.body),"string"==typeof e){var n=t.querySelector(e);return null===n?void 0:n}return"function"==typeof e?Reflect.apply(e,document,[t]):e}Object.defineProperty(t,"getQuestionType",{enumerable:!0,get:function(){return a.getQuestionType}}),Object.defineProperty(t,"questionTypeWords",{enumerable:!0,get:function(){return a.questionTypeWords}}),t.fromElementArrayLike=c,t.fromElementLike=d;var p=function(){function e(t){this.questions=[],this.options=Object.assign(e.default,t),this.handleQuestionTemplate()}return e.prototype.handleQuestionTemplate=function(t){var n,r,i,o,l,s,a;void 0===t&&(t=e.default.question);for(var p=0,g=c(t.container)||[];p<g.length;p++){var f=g[p],h=f,y=d(t.title,h),v=(0,u.getQuestionType)((null==y?void 0:y.textContent)||"")||(0,u.getQuestionType)(h);if(console.log({container:f,title:y,type:v}),v){var m={container:f,type:v,title:d(t.title,h),single:"single_choice"===v?{text:d(null===(n=t.single)||void 0===n?void 0:n.text,h),target:d(null===(r=t.single)||void 0===r?void 0:r.target,h)}:{},multiple:"multiple_choice"===v?{text:d(null===(i=t.multiple)||void 0===i?void 0:i.text,h),target:d(null===(o=t.multiple)||void 0===o?void 0:o.target,h)}:{},judgment:"judgment"===v?{text:d(null===(l=t.judgment)||void 0===l?void 0:l.text,h),target:d(null===(s=t.judgment)||void 0===s?void 0:s.target,h)}:{},completion:"completion"===v?{target:d(null===(a=t.completion)||void 0===a?void 0:a.target,h)}:{}};this.questions.push(m)}}},e.default={type:u.getQuestionType,answer:function(){return{question:"",answers:[]}},question:{container:"ul",title:"div span",single:{text:"li",target:"li input",handler:l.singleChoiceHandler},multiple:{text:"li",target:"li input",handler:o.multipleChoiceHandler},judgment:{text:"li",target:"li input",isRightInFirst:!0,right:["是","对","正确","√","对的","是的","正确的","true","yes","YES","Yes"],wrong:["否","错","错误","x","错的","不正确的","不正确","不是","不是的","false","no","NO","No"],handler:i.judgmentHandler},completion:{target:"textarea",handler:r.completionHandler}}},e}();t.QA=p},732:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOptions=void 0;var r=n(65);t.getOptions=function(e,t){var n=Array.from(e.querySelectorAll(t)),i=(0,r.getQuestionType)(e);return n.map((function(e){return"completion"===i?"":e.innerText}))}},65:(e,t)=>{"use strict";function n(e,t){return t.some((function(t){return RegExp(t).test(e)}))}Object.defineProperty(t,"__esModule",{value:!0}),t.questionTypeWords=t.getQuestionType=void 0,t.getQuestionType=function(e){var r=void 0;if("string"==typeof e)n(e,t.questionTypeWords.singleChoice)?r="single_choice":n(e,t.questionTypeWords.multipleChoice)?r="multiple_choice":n(e,t.questionTypeWords.judgment)?r="judgment":n(e,t.questionTypeWords.completion)&&(r="completion");else{var i=Array.from(e.querySelectorAll("input"));0!==i.length&&(2===i.length?i.every((function(e){return"radio"===e.type}))&&(r="judgment"):e.querySelector("textarea")?r="completion":i.every((function(e){return"radio"===e.type}))?r="single_choice":i.every((function(e){return"checkbox"===e.type}))&&(r="multiple_choice"))}return r},t.questionTypeWords={singleChoice:["单选","单选题","单项选择题"],multipleChoice:["多选","多选题","多项选择题"],judgment:["判断","判断题"],completion:["填空","填空题"]}},386:e=>{function t(e,t){if((e=e.replace(/\s+/g,""))===(t=t.replace(/\s+/g,"")))return 1;if(e.length<2||t.length<2)return 0;let n=new Map;for(let t=0;t<e.length-1;t++){const r=e.substring(t,t+2),i=n.has(r)?n.get(r)+1:1;n.set(r,i)}let r=0;for(let e=0;e<t.length-1;e++){const i=t.substring(e,e+2),o=n.has(i)?n.get(i):0;o>0&&(n.set(i,o-1),r++)}return 2*r/(e.length+t.length-2)}e.exports={compareTwoStrings:t,findBestMatch:function(e,n){if(!function(e,t){return"string"==typeof e&&!!Array.isArray(t)&&!!t.length&&!t.find((function(e){return"string"!=typeof e}))}(e,n))throw new Error("Bad arguments: First argument should be a string, second should be an array of strings");const r=[];let i=0;for(let o=0;o<n.length;o++){const l=n[o],u=t(e,l);r.push({target:l,rating:u}),u>r[i].rating&&(i=o)}return{ratings:r,bestMatch:r[i],bestMatchIndex:i}}}}},t={},n=function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(496);OCS=n})();