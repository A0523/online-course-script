import{d as A,a3 as T,j as M,o as i,c as x,g as e,w as o,b as n,p as B,f as $,F as h,a as D,q as f,t as I,l as z,m as U,af as P,al as Z,am as G,an as H,a1 as q,Z as N,ao as J,r as O,ap as K,aq as Q,ar as W,as as X,at as Y,au as ee,av as ne,i as V,aw as te,e as oe,V as ue,ax as ae,ay as se}from"./vendor.530941a1.js";/* empty css               *//* empty css               */import{R as le,c as S}from"./index.123e8d2f.js";/* empty css               */function E(F){return F}const ie={id:"user-form"},re=f(" \u8D85\u661F "),_e=f(" \u667A\u6167\u6811 "),de=f(" \u7528\u6237\u767B\u5F55 "),pe=f(" \u624B\u673A\u9A8C\u8BC1\u7801\u767B\u5F55 "),ce=f(" \u673A\u6784\u5355\u4F4D\u767B\u5F55 "),fe={class:"space-10 flex"},me=f(" \u83B7\u53D6\u8BFE\u7A0B\u5217\u8868 "),R=A({props:{btnText:{type:String,required:!0},user:{type:null,required:!1},mode:{type:String,required:!0}},emits:["ok"],setup(F,{emit:p}){const g=F,r=require("uuid"),{btnText:m,user:y,mode:C}=T(g),u=M((y==null?void 0:y.value)||s());async function k(){u.course=await le.script.call("login",u.loginScript,z(u)),u.course?(console.log("tempUser.course",u.course),U.success("\u8BFE\u7A0B\u5217\u8868\u83B7\u53D6\u6210\u529F!")):U.error("\u8BFE\u7A0B\u5217\u8868\u83B7\u53D6\u5931\u8D25 , \u8BF7\u91CD\u65B0\u83B7\u53D6!")}function s(){return{uid:r.v4().replace(/-/g,""),name:"",loginTime:0,delete:!1,updateTime:Date.now(),createTime:Date.now(),platform:"cx",params:"userLogin",loginScript:"cx-user-login",course:[],loginInfo:{cx:{phoneLogin:{phone:""},unitLogin:{password:"",uname:"",unitname:""},userLogin:{password:"",phone:""}},zhs:{phoneLogin:{password:"",phone:""},studentIdLogin:{password:"",school:"",studentId:""}}}}}return(d,t)=>{const l=P,_=Z,v=G,b=H,c=q,L=N,w=J;return i(),x("div",ie,[e(w,null,{default:o(()=>[e(_,{label:"\u7528\u6237\u540D\u5B57/\u5907\u6CE8"},{default:o(()=>[e(l,{value:n(u).name,"onUpdate:value":t[0]||(t[0]=a=>n(u).name=a)},null,8,["value"])]),_:1}),e(_,{label:"\u5E73\u53F0\u7C7B\u578B"},{default:o(()=>[e(b,{"default-value":"cx",onChange:t[3]||(t[3]=a=>n(u).platform=a.target.value)},{default:o(()=>[e(v,{value:"cx",onClick:t[1]||(t[1]=a=>n(u).params="userLogin")},{default:o(()=>[re]),_:1}),e(v,{value:"zhs",onClick:t[2]||(t[2]=a=>n(u).params="phoneLogin")},{default:o(()=>[_e]),_:1})]),_:1})]),_:1}),e(_,{label:"\u767B\u5F55\u7C7B\u578B"},{default:o(()=>[n(u).platform==="cx"?(i(),B(b,{key:0,"default-value":n(E)("cx-user-login"),onChange:t[4]||(t[4]=a=>n(u).params=a.target.value)},{default:o(()=>[e(v,{value:n(E)("cx-user-login")},{default:o(()=>[de]),_:1},8,["value"]),e(v,{value:n(E)("cx-phone-login")},{default:o(()=>[pe]),_:1},8,["value"]),e(v,{value:n(E)("cx-unit-login")},{default:o(()=>[ce]),_:1},8,["value"])]),_:1},8,["default-value"])):$("",!0)]),_:1}),n(u).platform==="cx"?(i(),x(h,{key:0},[n(u).loginScript==="cx-user-login"?(i(),x(h,{key:0},[e(_,{label:"\u8D26\u53F7"},{default:o(()=>[e(l,{value:n(u).loginInfo.cx.userLogin.phone,"onUpdate:value":t[5]||(t[5]=a=>n(u).loginInfo.cx.userLogin.phone=a)},null,8,["value"])]),_:1}),e(_,{label:"\u5BC6\u7801"},{default:o(()=>[e(l,{value:n(u).loginInfo.cx.userLogin.password,"onUpdate:value":t[6]||(t[6]=a=>n(u).loginInfo.cx.userLogin.password=a)},null,8,["value"])]),_:1})],64)):n(u).loginScript==="cx-phone-login"?(i(),B(_,{key:1,label:"\u624B\u673A\u53F7"},{default:o(()=>[e(l,{value:n(u).loginInfo.cx.phoneLogin.phone,"onUpdate:value":t[7]||(t[7]=a=>n(u).loginInfo.cx.phoneLogin.phone=a)},null,8,["value"])]),_:1})):n(u).loginScript==="cx-unit-login"?(i(),x(h,{key:2},[e(_,{label:"\u5B66\u6821/\u5355\u4F4D"},{default:o(()=>[e(l,{value:n(u).loginInfo.cx.unitLogin.unitname,"onUpdate:value":t[8]||(t[8]=a=>n(u).loginInfo.cx.unitLogin.unitname=a)},null,8,["value"])]),_:1}),e(_,{label:"\u5DE5\u53F7/\u5B66\u53F7"},{default:o(()=>[e(l,{value:n(u).loginInfo.cx.unitLogin.uname,"onUpdate:value":t[9]||(t[9]=a=>n(u).loginInfo.cx.unitLogin.uname=a)},null,8,["value"])]),_:1}),e(_,{label:"\u5BC6\u7801"},{default:o(()=>[e(l,{value:n(u).loginInfo.cx.unitLogin.password,"onUpdate:value":t[10]||(t[10]=a=>n(u).loginInfo.cx.unitLogin.password=a)},null,8,["value"])]),_:1})],64)):$("",!0)],64)):$("",!0),e(_,{"wrapper-col":{span:12,offset:12}},{default:o(()=>[D("div",fe,[n(C)==="create"?(i(),B(c,{key:0,type:"primary",onClick:t[11]||(t[11]=a=>k())},{default:o(()=>[me]),_:1})):$("",!0),n(u).course.length===0?(i(),B(L,{key:1,content:"\u8BF7\u5148\u83B7\u53D6\u8BFE\u7A0B\u5217\u8868\uFF0C\u4E4B\u540E\u624D\u80FD\u6DFB\u52A0 "},{default:o(()=>[e(c,{type:"primary",disabled:!0},{default:o(()=>[f(I(n(m)),1)]),_:1})]),_:1})):(i(),B(c,{key:2,type:"primary",onClick:t[12]||(t[12]=a=>p("ok",n(u)))},{default:o(()=>[f(I(n(m)),1)]),_:1}))])]),_:1})]),_:1})])}}}),ve={class:"user-info"},ge={class:"font-v4"},xe=A({props:{user:{type:null,required:!0}},emits:["delete","modify"],setup(F,{emit:p}){const g=F,{user:r}=T(g),m=O(!1);function y(){m.value=!1,p("modify",r.value)}function C(){m.value=!0}function u(){}return(k,s)=>{const d=K,t=Q,l=N,_=W,v=X,b=Y,c=ee,L=ne,w=V,a=te;return i(),B(a,{hoverable:"",style:{width:"210px",margin:"8px"},bodyStyle:{padding:"12px",display:"flex",alignItems:"baseline"}},{actions:o(()=>[e(l,{content:"\u5220\u9664"},{default:o(()=>[e(t,{title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u8D26\u53F7\u5417","ok-text":"\u786E\u5B9A","cancel-text":"\u53D6\u6D88",onConfirm:s[0]||(s[0]=j=>p("delete",n(r)))},{default:o(()=>[e(d)]),_:1})]),_:1}),e(l,{content:"\u4FEE\u6539"},{default:o(()=>[e(_,{onClick:C})]),_:1}),e(l,{content:"\u542F\u52A8"},{default:o(()=>[e(v,{onClick:u})]),_:1})]),default:o(()=>[e(L,null,{title:o(()=>[D("span",ve,[f(I(n(r).name)+" ",1),D("span",ge,I(n(r).loginInfo.phone||n(r).loginInfo.uname||n(r).loginInfo.studentId),1)])]),avatar:o(()=>[e(c,null,{icon:o(()=>[e(b)]),_:1})]),_:1}),e(w,{visible:m.value,"onUpdate:visible":s[1]||(s[1]=j=>m.value=j),title:"\u4FEE\u6539\u7528\u6237",footer:null,destroyOnClose:!0},{default:o(()=>[e(R,{onOk:y,btnText:"\u4FEE\u6539",user:n(r),mode:"modify"},null,8,["user"])]),_:1},8,["visible"])]),_:1})}}});const ye={style:{"text-align":"center",padding:"0px 50px",height:"100%"}},Be={key:0,style:{width:"100%",height:"100%"},class:"flex jc-center ac-center ai-center"},Fe=f(" \u6DFB\u52A0\u8D26\u53F7 "),be={style:{margin:"18px auto",width:"420px"}},De={class:"flex wrap"},Ce={style:{width:"210px",height:"100px"},class:"flex ac-center ai-center jc-center add-card"},Le=A({setup(F){S.users&&(S.users=[]);const p=S.users,g=O(!1),r=O(""),m=s=>{g.value=!1,p.push(s),console.log("add-user",s),U.success("\u521B\u5EFA\u6210\u529F!")};function y(s){return s.filter(t=>{if(t.name.indexOf(r.value)!==-1)return t;for(const l in t.loginInfo)if(t.loginInfo[l].toString().indexOf(r.value)!==-1)return t})}function C(s){p.splice(p.findIndex(d=>d.uid===s.uid),1)}function u(s){Object.assign(p,p.map(d=>d.uid===s.uid?s:d))}function k(){g.value=!0}return(s,d)=>{const t=se,l=q,_=ue,v=ae,b=V;return i(),x("div",ye,[n(p).length===0?(i(),x("div",Be,[e(_,{description:""},{default:o(()=>[e(l,{type:"primary",shape:"round",onClick:k},{icon:o(()=>[e(t)]),default:o(()=>[Fe]),_:1})]),_:1})])):(i(),x(h,{key:1},[D("div",be,[e(v,{value:r.value,"onUpdate:value":d[0]||(d[0]=c=>r.value=c),placeholder:"\u8F93\u5165\u540D\u5B57\uFF0C\u6216\u8005\u5176\u4ED6\u4FE1\u606F\u7247\u6BB5","enter-button":"",style:{"border-radius":"12px"}},null,8,["value"])]),D("div",De,[(i(!0),x(h,null,oe(y(n(p)),c=>(i(),B(xe,{user:c,onDelete:C,onModify:u},null,8,["user"]))),256)),D("div",Ce,[e(l,{type:"primary",shape:"circle",onClick:k},{icon:o(()=>[e(t)]),_:1})])])],64)),e(b,{visible:g.value,"onUpdate:visible":d[1]||(d[1]=c=>g.value=c),title:"\u6DFB\u52A0\u7528\u6237",footer:null,destroyOnClose:!0},{default:o(()=>[e(R,{onOk:m,btnText:"\u6DFB\u52A0",mode:"create"})]),_:1},8,["visible"])])}}});export{Le as default};
